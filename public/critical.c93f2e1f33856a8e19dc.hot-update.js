"use strict";
self["webpackHotUpdateboilerplate"]("critical",{

/***/ "./app/classes/Animation.js":
/*!**********************************!*\
  !*** ./app/classes/Animation.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Animation)
/* harmony export */ });
/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/index.js");
/* harmony import */ var lodash_each__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/each */ "./node_modules/lodash/each.js");
/* harmony import */ var lodash_each__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_each__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gsap/ScrollTrigger */ "./node_modules/gsap/ScrollTrigger.js");
/* harmony import */ var gsap_DrawSVGPlugin__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gsap/DrawSVGPlugin */ "./node_modules/gsap/DrawSVGPlugin.js");
/* harmony import */ var gsap_SplitText__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! gsap/SplitText */ "./node_modules/gsap/SplitText.js");
/* harmony import */ var _utils_createGlitchChar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/createGlitchChar */ "./app/utils/createGlitchChar.js");






gsap__WEBPACK_IMPORTED_MODULE_2__["default"].registerPlugin(gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_3__.ScrollTrigger, gsap_DrawSVGPlugin__WEBPACK_IMPORTED_MODULE_4__.DrawSVGPlugin, gsap_SplitText__WEBPACK_IMPORTED_MODULE_5__.SplitText);
class Animation {
  constructor() {}
  /**
   * Anime les flèches SVG au survol des liens
   * Crée un effet de transition où la flèche principale sort en diagonale
   * et une flèche secondaire entre pour la remplacer
   *
   * @param {NodeList|Array} linkContainers - Les conteneurs de liens avec flèches à animer
   */
  animateArrowOnHover(linkContainers) {
    lodash_each__WEBPACK_IMPORTED_MODULE_0___default()(linkContainers, container => {
      // Sélection des deux états de la flèche
      const arrowDefault = container.querySelector(".arrow");
      const arrowHover = container.querySelector(".arrow__hover");

      // Timeline pour gérer l'animation au survol
      const hoverTimeline = gsap__WEBPACK_IMPORTED_MODULE_2__["default"].timeline({
        paused: true
      });

      // Animation de sortie : la flèche par défaut se déplace et disparaît
      hoverTimeline.to(arrowDefault, {
        x: 10,
        y: -10,
        opacity: 0,
        duration: 0.2
      });

      // Animation d'entrée : la flèche de survol apparaît à sa place
      hoverTimeline.to(arrowHover, {
        x: 0,
        y: 0,
        opacity: 1,
        duration: 0.2
      });

      // Déclenche l'animation au survol
      container.addEventListener("mouseenter", () => {
        hoverTimeline.play();
      });

      // Inverse l'animation quand la souris quitte l'élément
      container.addEventListener("mouseleave", () => {
        hoverTimeline.reverse();
      });
    });
  }

  /**
   * Fait apparaitre en fondu et depuis le bas ou le haut un mot
   * @param {Element} textDOMElement - L'élément DOM à faire apparaitre depuis le bas ou le haut.
   * @returns {GSAPTween} - Un mot qui apparait depuis le bas
   */
  animateTextByWords(textDOMElement) {
    if (!textDOMElement) return;
    gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_3__.ScrollTrigger.create({
      trigger: textDOMElement,
      start: "top bottom",
      onEnter: () => {
        gsap_SplitText__WEBPACK_IMPORTED_MODULE_5__.SplitText.create(textDOMElement, {
          type: "words",
          autoSplit: true,
          onSplit: self => {
            gsap__WEBPACK_IMPORTED_MODULE_2__["default"].from(self.words, {
              yPercent: 100,
              autoAlpha: 0,
              ease: [0.77, 0, 0.175, 1],
              stagger: 0.05
            });
          }
        });
      }
    });
  }

  /**
   * Fait apparaitre en fondu et depuis le bas ou le haut une ligne
   * @param {Element} textDOMElement - L'élément DOM à faire apparaitre depuis le bas ou le haut.
   * @returns {GSAPTween} - Une ligne qui apparait depuis le bas
   */
  animateTextByCharacters(textDOMElement) {
    if (!textDOMElement) return;
    gsap_SplitText__WEBPACK_IMPORTED_MODULE_5__.SplitText.create(textDOMElement, {
      type: "chars",
      autoSplit: true,
      onSplit: self => {
        gsap__WEBPACK_IMPORTED_MODULE_2__["default"].to(self.chars, {
          yPercent: 100,
          autoAlpha: 0,
          ease: [0.77, 0, 0.175, 1],
          stagger: 0.005
        });
      }
    });
  }

  /**
   * Fait apparaitre en fondu et depuis le bas ou le haut une ligne
   * @param {Element} textDOMElement - L'élément DOM à faire apparaitre depuis le bas ou le haut.
   * @returns {GSAPTween} - Une ligne qui apparait depuis le bas
   */
  animateTextByLines(textDOMElement) {
    if (!textDOMElement) return;
    gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_3__.ScrollTrigger.create({
      trigger: textDOMElement,
      start: "top bottom",
      once: true,
      onEnter: () => {
        gsap_SplitText__WEBPACK_IMPORTED_MODULE_5__.SplitText.create(textDOMElement, {
          type: "lines",
          autoSplit: true,
          onSplit: self => {
            gsap__WEBPACK_IMPORTED_MODULE_2__["default"].from(self.lines, {
              yPercent: 100,
              autoAlpha: 0,
              ease: [0.77, 0, 0.175, 1],
              stagger: 0.05
            });
          }
        });
      }
    });
  }

  /**
   * @param {Element} element - L'élément DOM à faire apparaitre en mode glitch
   * @returns {GSAPTween} - Un mot qui apparait depuis le bas
   */
  animateGlitchText(element) {
    gsap__WEBPACK_IMPORTED_MODULE_2__["default"].set(element, {
      opacity: 1
    });
    gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_3__.ScrollTrigger.create({
      trigger: element,
      start: "top bottom",
      once: true,
      onEnter: () => {
        const text = element.dataset.text;
        const chars = text.split("");
        const fakeChars = ".-':_,^=;><+!rc*/z?sLTv)J7(|Fi{C}fI31tlu[neoZ5Yxjya]2ESwqkP6h9d4VpOGbUAKXHm8RD#$Bg0MNWQ%&@".split("");
        const fragment = document.createDocumentFragment(); // Fragment pour éviter les reflows

        element.innerHTML = ""; // Vider le contenu de l'élément

        lodash_each__WEBPACK_IMPORTED_MODULE_0___default()(chars, (char, i) => {
          const {
            charWrapper,
            fakeChar,
            real
          } = (0,_utils_createGlitchChar__WEBPACK_IMPORTED_MODULE_1__.createGlitchChar)(char, fakeChars);
          fragment.appendChild(charWrapper);

          // Animation timeline
          gsap__WEBPACK_IMPORTED_MODULE_2__["default"].timeline({
            delay: i * 0.03
          }).set(charWrapper, {
            visibility: "visible"
          }).to(fakeChar, {
            opacity: 1,
            stagger: 0.1,
            duration: 0.1,
            ease: [0.77, 0, 0.175, 1]
          }).to(fakeChar, {
            scaleX: 0,
            stagger: 0.1,
            duration: 0.1,
            transformOrigin: "center left",
            ease: [0.77, 0, 0.175, 1]
          }).to(real, {
            opacity: 1,
            stagger: 0.1,
            duration: 0.1,
            ease: [0.77, 0, 0.175, 1]
          });
        });

        // Une fois tous les éléments créés, les ajouter tous d'un coup à l'élément DOM
        element.appendChild(fragment);
      }
    });
  }
  getAllCards(cardsElements) {
    const elements = {};
    const cards = cardsElements;
    lodash_each__WEBPACK_IMPORTED_MODULE_0___default()(cards, (card, index) => {
      elements[`card__${index}`] = {}; // Crée un objet pour chaque carte

      const allParts = ["card__arrow__bar", "card__arrow__head__left", "card__arrow__head__right"];
      allParts.forEach(part => {
        const el = card.querySelector(`.${part}`);
        if (el) {
          elements[`card__${index}`][`${part}`] = el;
        }
        for (let i = 0; i <= 3; i++) {
          const preEl = card.querySelector(`.${part}__${i}`);
          if (preEl) {
            elements[`card__${index}`][`${part}__${i}`] = preEl;
          }
        }
      });
    });
    return elements;
  }

  // Fonction pour configurer les animations de chaque carte
  setupCardAnimations(cardsElements) {
    const allSVG = this.getAllCards(cardsElements); // Récupérer tous les SVG
    const ease = [0.77, 0, 0.175, 1];
    const isMobile = window.innerWidth <= 621; // Détection mobile (ajustez la valeur selon vos besoins)

    // Appliquer les animations à chaque carte au survol
    const allCards = cardsElements;
    lodash_each__WEBPACK_IMPORTED_MODULE_0___default()(allCards, (card, index) => {
      const svgElements = allSVG[`card__${index}`]; // Récupère les éléments SVG de la carte actuelle

      // Crée une timeline GSAP
      const tl = gsap__WEBPACK_IMPORTED_MODULE_2__["default"].timeline({
        paused: true
      });
      const delayIncrement = 0.1;
      for (let i = 0; i <= 3; i++) {
        // Ajout des animations GSAP pour chaque élément SVG
        tl.fromTo(svgElements[`card__arrow__bar__${i}`], {
          drawSVG: "0%"
        }, {
          drawSVG: "100%",
          duration: 0.3,
          ease
        }, `start+=${i * delayIncrement}` // Ajouter un décalage rapide entre les animations
        ).fromTo(svgElements[`card__arrow__head__left__${i}`], {
          drawSVG: "0%"
        }, {
          drawSVG: "100%",
          duration: 0.3,
          ease
        }, `start+=${i * delayIncrement + 0.2}` // Le même décalage
        ).fromTo(svgElements[`card__arrow__head__right__${i}`], {
          drawSVG: "0%"
        }, {
          drawSVG: "100%",
          duration: 0.3,
          ease,
          transformOrigin: "top bottom"
        }, `start+=${i * delayIncrement + 0.2}` // Décalage similaire ici
        );
      }
      const linkCard = card.querySelector(".card__footer");

      // Sur mobile : activer l'animation par défaut
      if (isMobile) {
        tl.play(); // Joue l'animation immédiatement sur mobile
      } else {
        // Sur desktop : appliquer l'animation au survol seulement
        linkCard.addEventListener("mouseenter", () => {
          tl.play(); // Joue l'animation lors du survol
        });
        linkCard.addEventListener("mouseleave", () => {
          tl.reverse(); // Inverse l'animation lorsque la souris quitte la carte
        });
      }
    });
  }
  handleHoverAnimation(e, element, state = "hover") {
    if (window.innerWidth <= 621) return;
    const overlay = element.querySelector(".hovered__competence");
    const staticTitle = element.querySelector(".competence__static__title");
    const directionY = this.getMouthDirection(e, element);
    const hoverTimeline = gsap__WEBPACK_IMPORTED_MODULE_2__["default"].timeline();
    if (state === "hover") {
      hoverTimeline.set(overlay, {
        y: directionY < 0 ? "-100%" : "100%"
      }).to(staticTitle, {
        y: directionY < 0 ? "100%" : "-100%",
        opacity: 0,
        duration: 0.05
      }).to(overlay, {
        y: "0%",
        duration: 0.1
      });
    } else if (state === "static") {
      hoverTimeline.set(staticTitle, {
        y: directionY < 0 ? "100%" : "-100%"
      }).to(overlay, {
        y: directionY < 0 ? "-100%" : "100%",
        duration: 0.5
      }).to(staticTitle, {
        opacity: 1,
        y: "0%",
        duration: 0.1
      }, "<+0.2");
    }
  }
  getMouthDirection(e, element) {
    const bounds = element.getBoundingClientRect();
    const fromTop = e.clientY - bounds.top < bounds.height / 2;
    return fromTop ? -1 : 1;
  }
}

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("c0371fc9a0ba6b8053fd")
/******/ })();
/******/ 
/******/ }
);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JpdGljYWwuYzkzZjJlMWYzMzg1NmE4ZTE5ZGMuaG90LXVwZGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3QjtBQUNPO0FBQ29CO0FBQ0E7QUFDUjtBQUVrQjtBQUU3REEsNENBQUksQ0FBQ00sY0FBYyxDQUFDSiw2REFBYSxFQUFFQyw2REFBYSxFQUFFQyxxREFBUyxDQUFDO0FBQzdDLE1BQU1HLFNBQVMsQ0FBQztFQUM3QkMsV0FBV0EsQ0FBQSxFQUFHLENBQUM7RUFDZjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFQyxtQkFBbUJBLENBQUNDLGNBQWMsRUFBRTtJQUNsQ1Qsa0RBQUksQ0FBQ1MsY0FBYyxFQUFHQyxTQUFTLElBQUs7TUFDbEM7TUFDQSxNQUFNQyxZQUFZLEdBQUdELFNBQVMsQ0FBQ0UsYUFBYSxDQUFDLFFBQVEsQ0FBQztNQUN0RCxNQUFNQyxVQUFVLEdBQUdILFNBQVMsQ0FBQ0UsYUFBYSxDQUFDLGVBQWUsQ0FBQzs7TUFFM0Q7TUFDQSxNQUFNRSxhQUFhLEdBQUdmLDRDQUFJLENBQUNnQixRQUFRLENBQUM7UUFBRUMsTUFBTSxFQUFFO01BQUssQ0FBQyxDQUFDOztNQUVyRDtNQUNBRixhQUFhLENBQUNHLEVBQUUsQ0FBQ04sWUFBWSxFQUFFO1FBQzdCTyxDQUFDLEVBQUUsRUFBRTtRQUNMQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO1FBQ05DLE9BQU8sRUFBRSxDQUFDO1FBQ1ZDLFFBQVEsRUFBRTtNQUNaLENBQUMsQ0FBQzs7TUFFRjtNQUNBUCxhQUFhLENBQUNHLEVBQUUsQ0FBQ0osVUFBVSxFQUFFO1FBQzNCSyxDQUFDLEVBQUUsQ0FBQztRQUNKQyxDQUFDLEVBQUUsQ0FBQztRQUNKQyxPQUFPLEVBQUUsQ0FBQztRQUNWQyxRQUFRLEVBQUU7TUFDWixDQUFDLENBQUM7O01BRUY7TUFDQVgsU0FBUyxDQUFDWSxnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUsTUFBTTtRQUM3Q1IsYUFBYSxDQUFDUyxJ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QUFHLENBQUM4QyxXQUFXLEVBQUU7UUFDaEIzRSxDQUFDLEVBQUU0RSxVQUFVLEdBQUcsQ0FBQyxHQUFHLE1BQU0sR0FBRztNQUMvQixDQUFDLENBQUMsQ0FDRDlFLEVBQUUsQ0FBQzRFLE9BQU8sRUFBRTtRQUFFMUUsQ0FBQyxFQUFFNEUsVUFBVSxHQUFHLENBQUMsR0FBRyxPQUFPLEdBQUcsTUFBTTtRQUFFMUUsUUFBUSxFQUFFO01BQUksQ0FBQyxDQUFDLENBQ3BFSixFQUFFLENBQUM2RSxXQUFXLEVBQUU7UUFBRTFFLE9BQU8sRUFBRSxDQUFDO1FBQUVELENBQUMsRUFBRSxJQUFJO1FBQUVFLFFBQVEsRUFBRTtNQUFJLENBQUMsRUFBRSxPQUFPLENBQUM7SUFDckU7RUFDRjtFQUVBMkUsaUJBQWlCQSxDQUFDTCxDQUFDLEVBQUU1QyxPQUFPLEVBQUU7SUFDNUIsTUFBTWtELE1BQU0sR0FBR2xELE9BQU8sQ0FBQ21ELHFCQUFxQixDQUFDLENBQUM7SUFFOUMsTUFBTUMsT0FBTyxHQUFHUixDQUFDLENBQUNTLE9BQU8sR0FBR0gsTUFBTSxDQUFDSSxHQUFHLEdBQUdKLE1BQU0sQ0FBQ0ssTUFBTSxHQUFHLENBQUM7SUFDMUQsT0FBT0gsT0FBTyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUM7RUFDekI7QUFDRjs7Ozs7Ozs7VUMxVUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ib2lsZXJwbGF0ZS8uL2FwcC9jbGFzc2VzL0FuaW1hdGlvbi5qcyIsIndlYnBhY2s6Ly9ib2lsZXJwbGF0ZS93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGdzYXAgZnJvbSBcImdzYXBcIjtcbmltcG9ydCBlYWNoIGZyb20gXCJsb2Rhc2gvZWFjaFwiO1xuaW1wb3J0IHsgU2Nyb2xsVHJpZ2dlciB9IGZyb20gXCJnc2FwL1Njcm9sbFRyaWdnZXJcIjtcbmltcG9ydCB7IERyYXdTVkdQbHVnaW4gfSBmcm9tIFwiZ3NhcC9EcmF3U1ZHUGx1Z2luXCI7XG5pbXBvcnQgeyBTcGxpdFRleHQgfSBmcm9tIFwiZ3NhcC9TcGxpdFRleHRcIjtcblxuaW1wb3J0IHsgY3JlYXRlR2xpdGNoQ2hhciB9IGZyb20gXCIuLi91dGlscy9jcmVhdGVHbGl0Y2hDaGFyXCI7XG5cbmdzYXAucmVnaXN0ZXJQbHVnaW4oU2Nyb2xsVHJpZ2dlciwgRHJhd1NWR1BsdWdpbiwgU3BsaXRUZXh0KTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFuaW1hdGlvbiB7XG4gIGNvbnN0cnVjdG9yKCkge31cbiAgLyoqXG4gICAqIEFuaW1lIGxlcyBmbMOoY2hlcyBTVkcgYXUgc3Vydm9sIGRlcyBsaWVuc1xuICAgKiBDcsOpZSB1biBlZmZldCBkZSB0cmFuc2l0aW9uIG/DuSBsYSBmbMOoY2hlIHByaW5jaXBhbGUgc29ydCBlbiBkaWFnb25hbGVcbiAgICogZXQgdW5lIGZsw6hjaGUgc2Vjb25kYWlyZSBlbnRyZSBwb3VyIGxhIHJlbXBsYWNlclxuICAgKlxuICAgKiBAcGFyYW0ge05vZGVMaXN0fEFycmF5fSBsaW5rQ29udGFpbmVycyAtIExlcyBjb250ZW5ldXJzIGRlIGxpZW5zIGF2ZWMgZmzDqGNoZXMgw6AgYW5pbWVyXG4gICAqL1xuICBhbmltYXRlQXJyb3dPbkhvdmVyKGxpbmtDb250YWluZXJzKSB7XG4gICAgZWFjaChsaW5rQ29udGFpbmVycywgKGNvbnRhaW5lcikgPT4ge1xuICAgICAgLy8gU8OpbGVjdGlvbiBkZXMgZGV1eCDDqXRhdHMgZGUgbGEgZmzDqGNoZVxuICAgICAgY29uc3QgYXJyb3dEZWZhdWx0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuYXJyb3dcIik7XG4gICAgICBjb25zdCBhcnJvd0hvdmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuYXJyb3dfX2hvdmVyXCIpO1xuXG4gICAgICAvLyBUaW1lbGluZSBwb3VyIGfDqXJlciBsJ2FuaW1hdGlvbiBhdSBzdXJ2b2xcbiAgICAgIGNvbnN0IGhvdmVyVGltZWxpbmUgPSBnc2FwLnRpbWVsaW5lKHsgcGF1c2VkOiB0cnVlIH0pO1xuXG4gICAgICAvLyBBbmltYXRpb24gZGUgc29ydGllIDogbGEgZmzDqGNoZSBwYXIgZMOpZmF1dCBzZSBkw6lwbGFjZSBldCBkaXNwYXJhw650XG4gICAgICBob3ZlclRpbWVsaW5lLnRvKGFycm93RGVmYXVsdCwge1xuICAgICAgICB4OiAxMCxcbiAgICAgICAgeTogLTEwLFxuICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICBkdXJhdGlvbjogMC4yLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFuaW1hdGlvbiBkJ2VudHLDqWUgOiBsYSBmbMOoY2hlIGRlIHN1cnZvbCBhcHBhcmHDrnQgw6Agc2EgcGxhY2VcbiAgICAgIGhvdmVyVGltZWxpbmUudG8oYXJyb3dIb3Zlciwge1xuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwLFxuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBkdXJhdGlvbjogMC4yLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIETDqWNsZW5jaGUgbCdhbmltYXRpb24gYXUgc3Vydm9sXG4gICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgKCkgPT4ge1xuICAgICAgICBob3ZlclRpbWVsaW5lLnBsYXkoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBJbnZlcnNlIGwnYW5pbWF0aW9uIHF1YW5kIGxhIHNvdXJpcyBxdWl0dGUgbCfDqWzDqW1lbnRcbiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCAoKSA9PiB7XG4gICAgICAgIGhvdmVyVGltZWxpbmUucmV2ZXJzZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmFpdCBhcHBhcmFpdHJlIGVuIGZvbmR1IGV0IGRlcHVpcyBsZSBiYXMgb3UgbGUgaGF1dCB1biBtb3RcbiAgICogQHBhcmFtIHtFbGVtZW50fSB0ZXh0RE9NRWxlbWVudCAtIEwnw6lsw6ltZW50IERPTSDDoCBmYWlyZSBhcHBhcmFpdHJlIGRlcHVpcyBsZSBiYXMgb3UgbGUgaGF1dC5cbiAgICogQHJldHVybnMge0dTQVBUd2Vlbn0gLSBVbiBtb3QgcXVpIGFwcGFyYWl0IGRlcHVpcyBsZSBiYXNcbiAgICovXG4gIGFuaW1hdGVUZXh0QnlXb3Jkcyh0ZXh0RE9NRWxlbWVudCkge1xuICAgIGlmICghdGV4dERPTUVsZW1lbnQpIHJldHVybjtcblxuICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbiAgICAgIHRyaWdnZXI6IHRleHRET01FbGVtZW50LFxuICAgICAgc3RhcnQ6IFwidG9wIGJvdHRvbVwiLFxuICAgICAgb25FbnRlcjogKCkgPT4ge1xuICAgICAgICBTcGxpdFRleHQuY3JlYXRlKHRleHRET01FbGVtZW50LCB7XG4gICAgICAgICAgdHlwZTogXCJ3b3Jkc1wiLFxuICAgICAgICAgIGF1dG9TcGxpdDogdHJ1ZSxcbiAgICAgICAgICBvblNwbGl0OiAoc2VsZikgPT4ge1xuICAgICAgICAgICAgZ3NhcC5mcm9tKHNlbGYud29yZHMsIHtcbiAgICAgICAgICAgICAgeVBlcmNlbnQ6IDEwMCxcbiAgICAgICAgICAgICAgYXV0b0FscGhhOiAwLFxuICAgICAgICAgICAgICBlYXNlOiBbMC43NywgMCwgMC4xNzUsIDFdLFxuICAgICAgICAgICAgICBzdGFnZ2VyOiAwLjA1LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZhaXQgYXBwYXJhaXRyZSBlbiBmb25kdSBldCBkZXB1aXMgbGUgYmFzIG91IGxlIGhhdXQgdW5lIGxpZ25lXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gdGV4dERPTUVsZW1lbnQgLSBMJ8OpbMOpbWVudCBET00gw6AgZmFpcmUgYXBwYXJhaXRyZSBkZXB1aXMgbGUgYmFzIG91IGxlIGhhdXQuXG4gICAqIEByZXR1cm5zIHtHU0FQVHdlZW59IC0gVW5lIGxpZ25lIHF1aSBhcHBhcmFpdCBkZXB1aXMgbGUgYmFzXG4gICAqL1xuICBhbmltYXRlVGV4dEJ5Q2hhcmFjdGVycyh0ZXh0RE9NRWxlbWVudCkge1xuICAgIGlmICghdGV4dERPTUVsZW1lbnQpIHJldHVybjtcbiAgICBTcGxpdFRleHQuY3JlYXRlKHRleHRET01FbGVtZW50LCB7XG4gICAgICB0eXBlOiBcImNoYXJzXCIsXG4gICAgICBhdXRvU3BsaXQ6IHRydWUsXG4gICAgICBvblNwbGl0OiAoc2VsZikgPT4ge1xuICAgICAgICBnc2FwLnRvKHNlbGYuY2hhcnMsIHtcbiAgICAgICAgICB5UGVyY2VudDogMTAwLFxuICAgICAgICAgIGF1dG9BbHBoYTogMCxcbiAgICAgICAgICBlYXNlOiBbMC43NywgMCwgMC4xNzUsIDFdLFxuICAgICAgICAgIHN0YWdnZXI6IDAuMDA1LFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmFpdCBhcHBhcmFpdHJlIGVuIGZvbmR1IGV0IGRlcHVpcyBsZSBiYXMgb3UgbGUgaGF1dCB1bmUgbGlnbmVcbiAgICogQHBhcmFtIHtFbGVtZW50fSB0ZXh0RE9NRWxlbWVudCAtIEwnw6lsw6ltZW50IERPTSDDoCBmYWlyZSBhcHBhcmFpdHJlIGRlcHVpcyBsZSBiYXMgb3UgbGUgaGF1dC5cbiAgICogQHJldHVybnMge0dTQVBUd2Vlbn0gLSBVbmUgbGlnbmUgcXVpIGFwcGFyYWl0IGRlcHVpcyBsZSBiYXNcbiAgICovXG4gIGFuaW1hdGVUZXh0QnlMaW5lcyh0ZXh0RE9NRWxlbWVudCkge1xuICAgIGlmICghdGV4dERPTUVsZW1lbnQpIHJldHVybjtcblxuICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbiAgICAgIHRyaWdnZXI6IHRleHRET01FbGVtZW50LFxuICAgICAgc3RhcnQ6IFwidG9wIGJvdHRvbVwiLFxuICAgICAgb25jZTogdHJ1ZSxcblxuICAgICAgb25FbnRlcjogKCkgPT4ge1xuICAgICAgICBTcGxpdFRleHQuY3JlYXRlKHRleHRET01FbGVtZW50LCB7XG4gICAgICAgICAgdHlwZTogXCJsaW5lc1wiLFxuICAgICAgICAgIGF1dG9TcGxpdDogdHJ1ZSxcbiAgICAgICAgICBvblNwbGl0OiAoc2VsZikgPT4ge1xuICAgICAgICAgICAgZ3NhcC5mcm9tKHNlbGYubGluZXMsIHtcbiAgICAgICAgICAgICAgeVBlcmNlbnQ6IDEwMCxcbiAgICAgICAgICAgICAgYXV0b0FscGhhOiAwLFxuICAgICAgICAgICAgICBlYXNlOiBbMC43NywgMCwgMC4xNzUsIDFdLFxuICAgICAgICAgICAgICBzdGFnZ2VyOiAwLjA1LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtIEwnw6lsw6ltZW50IERPTSDDoCBmYWlyZSBhcHBhcmFpdHJlIGVuIG1vZGUgZ2xpdGNoXG4gICAqIEByZXR1cm5zIHtHU0FQVHdlZW59IC0gVW4gbW90IHF1aSBhcHBhcmFpdCBkZXB1aXMgbGUgYmFzXG4gICAqL1xuICBhbmltYXRlR2xpdGNoVGV4dChlbGVtZW50KSB7XG4gICAgZ3NhcC5zZXQoZWxlbWVudCwgeyBvcGFjaXR5OiAxIH0pO1xuXG4gICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuICAgICAgdHJpZ2dlcjogZWxlbWVudCxcbiAgICAgIHN0YXJ0OiBcInRvcCBib3R0b21cIixcbiAgICAgIG9uY2U6IHRydWUsXG4gICAgICBvbkVudGVyOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBlbGVtZW50LmRhdGFzZXQudGV4dDtcbiAgICAgICAgY29uc3QgY2hhcnMgPSB0ZXh0LnNwbGl0KFwiXCIpO1xuICAgICAgICBjb25zdCBmYWtlQ2hhcnMgPVxuICAgICAgICAgIFwiLi0nOl8sXj07PjwrIXJjKi96P3NMVHYpSjcofEZpe0N9ZkkzMXRsdVtuZW9aNVl4anlhXTJFU3dxa1A2aDlkNFZwT0diVUFLWEhtOFJEIyRCZzBNTldRJSZAXCIuc3BsaXQoXG4gICAgICAgICAgICBcIlwiXG4gICAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsgLy8gRnJhZ21lbnQgcG91ciDDqXZpdGVyIGxlcyByZWZsb3dzXG5cbiAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBcIlwiOyAvLyBWaWRlciBsZSBjb250ZW51IGRlIGwnw6lsw6ltZW50XG5cbiAgICAgICAgZWFjaChjaGFycywgKGNoYXIsIGkpID0+IHtcbiAgICAgICAgICBjb25zdCB7IGNoYXJXcmFwcGVyLCBmYWtlQ2hhciwgcmVhbCB9ID0gY3JlYXRlR2xpdGNoQ2hhcihcbiAgICAgICAgICAgIGNoYXIsXG4gICAgICAgICAgICBmYWtlQ2hhcnNcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoY2hhcldyYXBwZXIpO1xuXG4gICAgICAgICAgLy8gQW5pbWF0aW9uIHRpbWVsaW5lXG4gICAgICAgICAgZ3NhcFxuICAgICAgICAgICAgLnRpbWVsaW5lKHsgZGVsYXk6IGkgKiAwLjAzIH0pXG4gICAgICAgICAgICAuc2V0KGNoYXJXcmFwcGVyLCB7IHZpc2liaWxpdHk6IFwidmlzaWJsZVwiIH0pXG4gICAgICAgICAgICAudG8oZmFrZUNoYXIsIHtcbiAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgc3RhZ2dlcjogMC4xLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogMC4xLFxuICAgICAgICAgICAgICBlYXNlOiBbMC43NywgMCwgMC4xNzUsIDFdLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50byhmYWtlQ2hhciwge1xuICAgICAgICAgICAgICBzY2FsZVg6IDAsXG4gICAgICAgICAgICAgIHN0YWdnZXI6IDAuMSxcbiAgICAgICAgICAgICAgZHVyYXRpb246IDAuMSxcbiAgICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiBcImNlbnRlciBsZWZ0XCIsXG4gICAgICAgICAgICAgIGVhc2U6IFswLjc3LCAwLCAwLjE3NSwgMV0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRvKHJlYWwsIHtcbiAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgc3RhZ2dlcjogMC4xLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogMC4xLFxuICAgICAgICAgICAgICBlYXNlOiBbMC43NywgMCwgMC4xNzUsIDFdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFVuZSBmb2lzIHRvdXMgbGVzIMOpbMOpbWVudHMgY3LDqcOpcywgbGVzIGFqb3V0ZXIgdG91cyBkJ3VuIGNvdXAgw6AgbCfDqWzDqW1lbnQgRE9NXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIGdldEFsbENhcmRzKGNhcmRzRWxlbWVudHMpIHtcbiAgICBjb25zdCBlbGVtZW50cyA9IHt9O1xuICAgIGNvbnN0IGNhcmRzID0gY2FyZHNFbGVtZW50cztcblxuICAgIGVhY2goY2FyZHMsIChjYXJkLCBpbmRleCkgPT4ge1xuICAgICAgZWxlbWVudHNbYGNhcmRfXyR7aW5kZXh9YF0gPSB7fTsgLy8gQ3LDqWUgdW4gb2JqZXQgcG91ciBjaGFxdWUgY2FydGVcblxuICAgICAgY29uc3QgYWxsUGFydHMgPSBbXG4gICAgICAgIFwiY2FyZF9fYXJyb3dfX2JhclwiLFxuICAgICAgICBcImNhcmRfX2Fycm93X19oZWFkX19sZWZ0XCIsXG4gICAgICAgIFwiY2FyZF9fYXJyb3dfX2hlYWRfX3JpZ2h0XCIsXG4gICAgICBdO1xuXG4gICAgICBhbGxQYXJ0cy5mb3JFYWNoKChwYXJ0KSA9PiB7XG4gICAgICAgIGNvbnN0IGVsID0gY2FyZC5xdWVyeVNlbGVjdG9yKGAuJHtwYXJ0fWApO1xuICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICBlbGVtZW50c1tgY2FyZF9fJHtpbmRleH1gXVtgJHtwYXJ0fWBdID0gZWw7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSAzOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBwcmVFbCA9IGNhcmQucXVlcnlTZWxlY3RvcihgLiR7cGFydH1fXyR7aX1gKTtcbiAgICAgICAgICBpZiAocHJlRWwpIHtcbiAgICAgICAgICAgIGVsZW1lbnRzW2BjYXJkX18ke2luZGV4fWBdW2Ake3BhcnR9X18ke2l9YF0gPSBwcmVFbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGVsZW1lbnRzO1xuICB9XG5cbiAgLy8gRm9uY3Rpb24gcG91ciBjb25maWd1cmVyIGxlcyBhbmltYXRpb25zIGRlIGNoYXF1ZSBjYXJ0ZVxuICBzZXR1cENhcmRBbmltYXRpb25zKGNhcmRzRWxlbWVudHMpIHtcbiAgICBjb25zdCBhbGxTVkcgPSB0aGlzLmdldEFsbENhcmRzKGNhcmRzRWxlbWVudHMpOyAvLyBSw6ljdXDDqXJlciB0b3VzIGxlcyBTVkdcbiAgICBjb25zdCBlYXNlID0gWzAuNzcsIDAsIDAuMTc1LCAxXTtcbiAgICBjb25zdCBpc01vYmlsZSA9IHdpbmRvdy5pbm5lcldpZHRoIDw9IDYyMTsgLy8gRMOpdGVjdGlvbiBtb2JpbGUgKGFqdXN0ZXogbGEgdmFsZXVyIHNlbG9uIHZvcyBiZXNvaW5zKVxuXG4gICAgLy8gQXBwbGlxdWVyIGxlcyBhbmltYXRpb25zIMOgIGNoYXF1ZSBjYXJ0ZSBhdSBzdXJ2b2xcbiAgICBjb25zdCBhbGxDYXJkcyA9IGNhcmRzRWxlbWVudHM7XG5cbiAgICBlYWNoKGFsbENhcmRzLCAoY2FyZCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHN2Z0VsZW1lbnRzID0gYWxsU1ZHW2BjYXJkX18ke2luZGV4fWBdOyAvLyBSw6ljdXDDqHJlIGxlcyDDqWzDqW1lbnRzIFNWRyBkZSBsYSBjYXJ0ZSBhY3R1ZWxsZVxuXG4gICAgICAvLyBDcsOpZSB1bmUgdGltZWxpbmUgR1NBUFxuICAgICAgY29uc3QgdGwgPSBnc2FwLnRpbWVsaW5lKHsgcGF1c2VkOiB0cnVlIH0pO1xuICAgICAgY29uc3QgZGVsYXlJbmNyZW1lbnQgPSAwLjE7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDM7IGkrKykge1xuICAgICAgICAvLyBBam91dCBkZXMgYW5pbWF0aW9ucyBHU0FQIHBvdXIgY2hhcXVlIMOpbMOpbWVudCBTVkdcbiAgICAgICAgdGwuZnJvbVRvKFxuICAgICAgICAgIHN2Z0VsZW1lbnRzW2BjYXJkX19hcnJvd19fYmFyX18ke2l9YF0sXG4gICAgICAgICAgeyBkcmF3U1ZHOiBcIjAlXCIgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkcmF3U1ZHOiBcIjEwMCVcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgICAgICBlYXNlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYHN0YXJ0Kz0ke2kgKiBkZWxheUluY3JlbWVudH1gIC8vIEFqb3V0ZXIgdW4gZMOpY2FsYWdlIHJhcGlkZSBlbnRyZSBsZXMgYW5pbWF0aW9uc1xuICAgICAgICApXG4gICAgICAgICAgLmZyb21UbyhcbiAgICAgICAgICAgIHN2Z0VsZW1lbnRzW2BjYXJkX19hcnJvd19faGVhZF9fbGVmdF9fJHtpfWBdLFxuICAgICAgICAgICAgeyBkcmF3U1ZHOiBcIjAlXCIgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZHJhd1NWRzogXCIxMDAlXCIsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgICAgICAgIGVhc2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYHN0YXJ0Kz0ke2kgKiBkZWxheUluY3JlbWVudCArIDAuMn1gIC8vIExlIG3Dqm1lIGTDqWNhbGFnZVxuICAgICAgICAgIClcbiAgICAgICAgICAuZnJvbVRvKFxuICAgICAgICAgICAgc3ZnRWxlbWVudHNbYGNhcmRfX2Fycm93X19oZWFkX19yaWdodF9fJHtpfWBdLFxuICAgICAgICAgICAgeyBkcmF3U1ZHOiBcIjAlXCIgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZHJhd1NWRzogXCIxMDAlXCIsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgICAgICAgIGVhc2UsXG4gICAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogXCJ0b3AgYm90dG9tXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYHN0YXJ0Kz0ke2kgKiBkZWxheUluY3JlbWVudCArIDAuMn1gIC8vIETDqWNhbGFnZSBzaW1pbGFpcmUgaWNpXG4gICAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGlua0NhcmQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZm9vdGVyXCIpO1xuXG4gICAgICAvLyBTdXIgbW9iaWxlIDogYWN0aXZlciBsJ2FuaW1hdGlvbiBwYXIgZMOpZmF1dFxuICAgICAgaWYgKGlzTW9iaWxlKSB7XG4gICAgICAgIHRsLnBsYXkoKTsgLy8gSm91ZSBsJ2FuaW1hdGlvbiBpbW3DqWRpYXRlbWVudCBzdXIgbW9iaWxlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTdXIgZGVza3RvcCA6IGFwcGxpcXVlciBsJ2FuaW1hdGlvbiBhdSBzdXJ2b2wgc2V1bGVtZW50XG4gICAgICAgIGxpbmtDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsICgpID0+IHtcbiAgICAgICAgICB0bC5wbGF5KCk7IC8vIEpvdWUgbCdhbmltYXRpb24gbG9ycyBkdSBzdXJ2b2xcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGlua0NhcmQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgKCkgPT4ge1xuICAgICAgICAgIHRsLnJldmVyc2UoKTsgLy8gSW52ZXJzZSBsJ2FuaW1hdGlvbiBsb3JzcXVlIGxhIHNvdXJpcyBxdWl0dGUgbGEgY2FydGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVIb3ZlckFuaW1hdGlvbihlLCBlbGVtZW50LCBzdGF0ZSA9IFwiaG92ZXJcIikge1xuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA2MjEpIHJldHVybjtcblxuICAgIGNvbnN0IG92ZXJsYXkgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaG92ZXJlZF9fY29tcGV0ZW5jZVwiKTtcbiAgICBjb25zdCBzdGF0aWNUaXRsZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb21wZXRlbmNlX19zdGF0aWNfX3RpdGxlXCIpO1xuICAgIGNvbnN0IGRpcmVjdGlvblkgPSB0aGlzLmdldE1vdXRoRGlyZWN0aW9uKGUsIGVsZW1lbnQpO1xuXG4gICAgY29uc3QgaG92ZXJUaW1lbGluZSA9IGdzYXAudGltZWxpbmUoKTtcblxuICAgIGlmIChzdGF0ZSA9PT0gXCJob3ZlclwiKSB7XG4gICAgICBob3ZlclRpbWVsaW5lXG4gICAgICAgIC5zZXQob3ZlcmxheSwgeyB5OiBkaXJlY3Rpb25ZIDwgMCA/IFwiLTEwMCVcIiA6IFwiMTAwJVwiIH0pXG4gICAgICAgIC50byhzdGF0aWNUaXRsZSwge1xuICAgICAgICAgIHk6IGRpcmVjdGlvblkgPCAwID8gXCIxMDAlXCIgOiBcIi0xMDAlXCIsXG4gICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICBkdXJhdGlvbjogMC4wNSxcbiAgICAgICAgfSlcbiAgICAgICAgLnRvKG92ZXJsYXksIHsgeTogXCIwJVwiLCBkdXJhdGlvbjogMC4xIH0pO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09IFwic3RhdGljXCIpIHtcbiAgICAgIGhvdmVyVGltZWxpbmVcbiAgICAgICAgLnNldChzdGF0aWNUaXRsZSwge1xuICAgICAgICAgIHk6IGRpcmVjdGlvblkgPCAwID8gXCIxMDAlXCIgOiBcIi0xMDAlXCIsXG4gICAgICAgIH0pXG4gICAgICAgIC50byhvdmVybGF5LCB7IHk6IGRpcmVjdGlvblkgPCAwID8gXCItMTAwJVwiIDogXCIxMDAlXCIsIGR1cmF0aW9uOiAwLjUgfSlcbiAgICAgICAgLnRvKHN0YXRpY1RpdGxlLCB7IG9wYWNpdHk6IDEsIHk6IFwiMCVcIiwgZHVyYXRpb246IDAuMSB9LCBcIjwrMC4yXCIpO1xuICAgIH1cbiAgfVxuXG4gIGdldE1vdXRoRGlyZWN0aW9uKGUsIGVsZW1lbnQpIHtcbiAgICBjb25zdCBib3VuZHMgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgY29uc3QgZnJvbVRvcCA9IGUuY2xpZW50WSAtIGJvdW5kcy50b3AgPCBib3VuZHMuaGVpZ2h0IC8gMjtcbiAgICByZXR1cm4gZnJvbVRvcCA/IC0xIDogMTtcbiAgfVxufVxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiYzAzNzFmYzlhMGJhNmI4MDUzZmRcIikiXSwibmFtZXMiOlsiZ3NhcCIsImVhY2giLCJTY3JvbGxUcmlnZ2VyIiwiRHJhd1NWR1BsdWdpbiIsIlNwbGl0VGV4dCIsImNyZWF0ZUdsaXRjaENoYXIiLCJyZWdpc3RlclBsdWdpbiIsIkFuaW1hdGlvbiIsImNvbnN0cnVjdG9yIiwiYW5pbWF0ZUFycm93T25Ib3ZlciIsImxpbmtDb250YWluZXJzIiwiY29udGFpbmVyIiwiYXJyb3dEZWZhdWx0IiwicXVlcnlTZWxlY3RvciIsImFycm93SG92ZXIiLCJob3ZlclRpbWVsaW5lIiwidGltZWxpbmUiLCJwYXVzZWQiLCJ0byIsIngiLCJ5Iiwib3BhY2l0eSIsImR1cmF0aW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBsYXkiLCJyZXZlcnNlIiwiYW5pbWF0ZVRleHRCeVdvcmRzIiwidGV4dERPTUVsZW1lbnQiLCJjcmVhdGUiLCJ0cmlnZ2VyIiwic3RhcnQiLCJvbkVudGVyIiwidHlwZSIsImF1dG9TcGxpdCIsIm9uU3BsaXQiLCJzZWxmIiwiZnJvbSIsIndvcmRzIiwieVBlcmNlbnQiLCJhdXRvQWxwaGEiLCJlYXNlIiwic3RhZ2dlciIsImFuaW1hdGVUZXh0QnlDaGFyYWN0ZXJzIiwiY2hhcnMiLCJhbmltYXRlVGV4dEJ5TGluZXMiLCJvbmNlIiwibGluZXMiLCJhbmltYXRlR2xpdGNoVGV4dCIsImVsZW1lbnQiLCJzZXQiLCJ0ZXh0IiwiZGF0YXNldCIsInNwbGl0IiwiZmFrZUNoYXJzIiwiZnJhZ21lbnQiLCJkb2N1bWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJpbm5lckhUTUwiLCJjaGFyIiwiaSIsImNoYXJXcmFwcGVyIiwiZmFrZUNoYXIiLCJyZWFsIiwiYXBwZW5kQ2hpbGQiLCJkZWxheSIsInZpc2liaWxpdHkiLCJzY2FsZVgiLCJ0cmFuc2Zvcm1PcmlnaW4iLCJnZXRBbGxDYXJkcyIsImNhcmRzRWxlbWVudHMiLCJlbGVtZW50cyIsImNhcmRzIiwiY2FyZCIsImluZGV4IiwiYWxsUGFydHMiLCJmb3JFYWNoIiwicGFydCIsImVsIiwicHJlRWwiLCJzZXR1cENhcmRBbmltYXRpb25zIiwiYWxsU1ZHIiwiaXNNb2JpbGUiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiYWxsQ2FyZHMiLCJzdmdFbGVtZW50cyIsInRsIiwiZGVsYXlJbmNyZW1lbnQiLCJmcm9tVG8iLCJkcmF3U1ZHIiwibGlua0NhcmQiLCJoYW5kbGVIb3ZlckFuaW1hdGlvbiIsImUiLCJzdGF0ZSIsIm92ZXJsYXkiLCJzdGF0aWNUaXRsZSIsImRpcmVjdGlvblkiLCJnZXRNb3V0aERpcmVjdGlvbiIsImJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImZyb21Ub3AiLCJjbGllbnRZIiwidG9wIiwiaGVpZ2h0Il0sInNvdXJjZVJvb3QiOiIifQ==