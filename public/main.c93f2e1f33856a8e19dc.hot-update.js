"use strict";
self["webpackHotUpdateboilerplate"]("main",{

/***/ "./app/classes/Animation.js":
/*!**********************************!*\
  !*** ./app/classes/Animation.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Animation)
/* harmony export */ });
/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/index.js");
/* harmony import */ var lodash_each__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/each */ "./node_modules/lodash/each.js");
/* harmony import */ var lodash_each__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_each__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gsap/ScrollTrigger */ "./node_modules/gsap/ScrollTrigger.js");
/* harmony import */ var gsap_DrawSVGPlugin__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gsap/DrawSVGPlugin */ "./node_modules/gsap/DrawSVGPlugin.js");
/* harmony import */ var gsap_SplitText__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! gsap/SplitText */ "./node_modules/gsap/SplitText.js");
/* harmony import */ var _utils_createGlitchChar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/createGlitchChar */ "./app/utils/createGlitchChar.js");






gsap__WEBPACK_IMPORTED_MODULE_2__["default"].registerPlugin(gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_3__.ScrollTrigger, gsap_DrawSVGPlugin__WEBPACK_IMPORTED_MODULE_4__.DrawSVGPlugin, gsap_SplitText__WEBPACK_IMPORTED_MODULE_5__.SplitText);
class Animation {
  constructor() {}
  /**
   * Anime les flèches SVG au survol des liens
   * Crée un effet de transition où la flèche principale sort en diagonale
   * et une flèche secondaire entre pour la remplacer
   *
   * @param {NodeList|Array} linkContainers - Les conteneurs de liens avec flèches à animer
   */
  animateArrowOnHover(linkContainers) {
    lodash_each__WEBPACK_IMPORTED_MODULE_0___default()(linkContainers, container => {
      // Sélection des deux états de la flèche
      const arrowDefault = container.querySelector(".arrow");
      const arrowHover = container.querySelector(".arrow__hover");

      // Timeline pour gérer l'animation au survol
      const hoverTimeline = gsap__WEBPACK_IMPORTED_MODULE_2__["default"].timeline({
        paused: true
      });

      // Animation de sortie : la flèche par défaut se déplace et disparaît
      hoverTimeline.to(arrowDefault, {
        x: 10,
        y: -10,
        opacity: 0,
        duration: 0.2
      });

      // Animation d'entrée : la flèche de survol apparaît à sa place
      hoverTimeline.to(arrowHover, {
        x: 0,
        y: 0,
        opacity: 1,
        duration: 0.2
      });

      // Déclenche l'animation au survol
      container.addEventListener("mouseenter", () => {
        hoverTimeline.play();
      });

      // Inverse l'animation quand la souris quitte l'élément
      container.addEventListener("mouseleave", () => {
        hoverTimeline.reverse();
      });
    });
  }

  /**
   * Fait apparaitre en fondu et depuis le bas ou le haut un mot
   * @param {Element} textDOMElement - L'élément DOM à faire apparaitre depuis le bas ou le haut.
   * @returns {GSAPTween} - Un mot qui apparait depuis le bas
   */
  animateTextByWords(textDOMElement) {
    if (!textDOMElement) return;
    gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_3__.ScrollTrigger.create({
      trigger: textDOMElement,
      start: "top bottom",
      onEnter: () => {
        gsap_SplitText__WEBPACK_IMPORTED_MODULE_5__.SplitText.create(textDOMElement, {
          type: "words",
          autoSplit: true,
          onSplit: self => {
            gsap__WEBPACK_IMPORTED_MODULE_2__["default"].from(self.words, {
              yPercent: 100,
              autoAlpha: 0,
              ease: [0.77, 0, 0.175, 1],
              stagger: 0.05
            });
          }
        });
      }
    });
  }

  /**
   * Fait apparaitre en fondu et depuis le bas ou le haut une ligne
   * @param {Element} textDOMElement - L'élément DOM à faire apparaitre depuis le bas ou le haut.
   * @returns {GSAPTween} - Une ligne qui apparait depuis le bas
   */
  animateTextByCharacters(textDOMElement) {
    if (!textDOMElement) return;
    gsap_SplitText__WEBPACK_IMPORTED_MODULE_5__.SplitText.create(textDOMElement, {
      type: "chars",
      autoSplit: true,
      onSplit: self => {
        gsap__WEBPACK_IMPORTED_MODULE_2__["default"].to(self.chars, {
          yPercent: 100,
          autoAlpha: 0,
          ease: [0.77, 0, 0.175, 1],
          stagger: 0.005
        });
      }
    });
  }

  /**
   * Fait apparaitre en fondu et depuis le bas ou le haut une ligne
   * @param {Element} textDOMElement - L'élément DOM à faire apparaitre depuis le bas ou le haut.
   * @returns {GSAPTween} - Une ligne qui apparait depuis le bas
   */
  animateTextByLines(textDOMElement) {
    if (!textDOMElement) return;
    gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_3__.ScrollTrigger.create({
      trigger: textDOMElement,
      start: "top bottom",
      once: true,
      onEnter: () => {
        gsap_SplitText__WEBPACK_IMPORTED_MODULE_5__.SplitText.create(textDOMElement, {
          type: "lines",
          autoSplit: true,
          onSplit: self => {
            gsap__WEBPACK_IMPORTED_MODULE_2__["default"].from(self.lines, {
              yPercent: 100,
              autoAlpha: 0,
              ease: [0.77, 0, 0.175, 1],
              stagger: 0.05
            });
          }
        });
      }
    });
  }

  /**
   * @param {Element} element - L'élément DOM à faire apparaitre en mode glitch
   * @returns {GSAPTween} - Un mot qui apparait depuis le bas
   */
  animateGlitchText(element) {
    gsap__WEBPACK_IMPORTED_MODULE_2__["default"].set(element, {
      opacity: 1
    });
    gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_3__.ScrollTrigger.create({
      trigger: element,
      start: "top bottom",
      once: true,
      onEnter: () => {
        const text = element.dataset.text;
        const chars = text.split("");
        const fakeChars = ".-':_,^=;><+!rc*/z?sLTv)J7(|Fi{C}fI31tlu[neoZ5Yxjya]2ESwqkP6h9d4VpOGbUAKXHm8RD#$Bg0MNWQ%&@".split("");
        const fragment = document.createDocumentFragment(); // Fragment pour éviter les reflows

        element.innerHTML = ""; // Vider le contenu de l'élément

        lodash_each__WEBPACK_IMPORTED_MODULE_0___default()(chars, (char, i) => {
          const {
            charWrapper,
            fakeChar,
            real
          } = (0,_utils_createGlitchChar__WEBPACK_IMPORTED_MODULE_1__.createGlitchChar)(char, fakeChars);
          fragment.appendChild(charWrapper);

          // Animation timeline
          gsap__WEBPACK_IMPORTED_MODULE_2__["default"].timeline({
            delay: i * 0.03
          }).set(charWrapper, {
            visibility: "visible"
          }).to(fakeChar, {
            opacity: 1,
            stagger: 0.1,
            duration: 0.1,
            ease: [0.77, 0, 0.175, 1]
          }).to(fakeChar, {
            scaleX: 0,
            stagger: 0.1,
            duration: 0.1,
            transformOrigin: "center left",
            ease: [0.77, 0, 0.175, 1]
          }).to(real, {
            opacity: 1,
            stagger: 0.1,
            duration: 0.1,
            ease: [0.77, 0, 0.175, 1]
          });
        });

        // Une fois tous les éléments créés, les ajouter tous d'un coup à l'élément DOM
        element.appendChild(fragment);
      }
    });
  }
  getAllCards(cardsElements) {
    const elements = {};
    const cards = cardsElements;
    lodash_each__WEBPACK_IMPORTED_MODULE_0___default()(cards, (card, index) => {
      elements[`card__${index}`] = {}; // Crée un objet pour chaque carte

      const allParts = ["card__arrow__bar", "card__arrow__head__left", "card__arrow__head__right"];
      allParts.forEach(part => {
        const el = card.querySelector(`.${part}`);
        if (el) {
          elements[`card__${index}`][`${part}`] = el;
        }
        for (let i = 0; i <= 3; i++) {
          const preEl = card.querySelector(`.${part}__${i}`);
          if (preEl) {
            elements[`card__${index}`][`${part}__${i}`] = preEl;
          }
        }
      });
    });
    return elements;
  }

  // Fonction pour configurer les animations de chaque carte
  setupCardAnimations(cardsElements) {
    const allSVG = this.getAllCards(cardsElements); // Récupérer tous les SVG
    const ease = [0.77, 0, 0.175, 1];
    const isMobile = window.innerWidth <= 621; // Détection mobile (ajustez la valeur selon vos besoins)

    // Appliquer les animations à chaque carte au survol
    const allCards = cardsElements;
    lodash_each__WEBPACK_IMPORTED_MODULE_0___default()(allCards, (card, index) => {
      const svgElements = allSVG[`card__${index}`]; // Récupère les éléments SVG de la carte actuelle

      // Crée une timeline GSAP
      const tl = gsap__WEBPACK_IMPORTED_MODULE_2__["default"].timeline({
        paused: true
      });
      const delayIncrement = 0.1;
      for (let i = 0; i <= 3; i++) {
        // Ajout des animations GSAP pour chaque élément SVG
        tl.fromTo(svgElements[`card__arrow__bar__${i}`], {
          drawSVG: "0%"
        }, {
          drawSVG: "100%",
          duration: 0.3,
          ease
        }, `start+=${i * delayIncrement}` // Ajouter un décalage rapide entre les animations
        ).fromTo(svgElements[`card__arrow__head__left__${i}`], {
          drawSVG: "0%"
        }, {
          drawSVG: "100%",
          duration: 0.3,
          ease
        }, `start+=${i * delayIncrement + 0.2}` // Le même décalage
        ).fromTo(svgElements[`card__arrow__head__right__${i}`], {
          drawSVG: "0%"
        }, {
          drawSVG: "100%",
          duration: 0.3,
          ease,
          transformOrigin: "top bottom"
        }, `start+=${i * delayIncrement + 0.2}` // Décalage similaire ici
        );
      }
      const linkCard = card.querySelector(".card__footer");

      // Sur mobile : activer l'animation par défaut
      if (isMobile) {
        tl.play(); // Joue l'animation immédiatement sur mobile
      } else {
        // Sur desktop : appliquer l'animation au survol seulement
        linkCard.addEventListener("mouseenter", () => {
          tl.play(); // Joue l'animation lors du survol
        });
        linkCard.addEventListener("mouseleave", () => {
          tl.reverse(); // Inverse l'animation lorsque la souris quitte la carte
        });
      }
    });
  }
  handleHoverAnimation(e, element, state = "hover") {
    if (window.innerWidth <= 621) return;
    const overlay = element.querySelector(".hovered__competence");
    const staticTitle = element.querySelector(".competence__static__title");
    const directionY = this.getMouthDirection(e, element);
    const hoverTimeline = gsap__WEBPACK_IMPORTED_MODULE_2__["default"].timeline();
    if (state === "hover") {
      hoverTimeline.set(overlay, {
        y: directionY < 0 ? "-100%" : "100%"
      }).to(staticTitle, {
        y: directionY < 0 ? "100%" : "-100%",
        opacity: 0,
        duration: 0.05
      }).to(overlay, {
        y: "0%",
        duration: 0.1
      });
    } else if (state === "static") {
      hoverTimeline.set(staticTitle, {
        y: directionY < 0 ? "100%" : "-100%"
      }).to(overlay, {
        y: directionY < 0 ? "-100%" : "100%",
        duration: 0.5
      }).to(staticTitle, {
        opacity: 1,
        y: "0%",
        duration: 0.1
      }, "<+0.2");
    }
  }
  getMouthDirection(e, element) {
    const bounds = element.getBoundingClientRect();
    const fromTop = e.clientY - bounds.top < bounds.height / 2;
    return fromTop ? -1 : 1;
  }
}

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("c0371fc9a0ba6b8053fd")
/******/ })();
/******/ 
/******/ }
);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQzhDLFdBQVcsRUFBRTtRQUNoQjNFLENBQUMsRUFBRTRFLFVBQVUsR0FBRyxDQUFDLEdBQUcsTUFBTSxHQUFHO01BQy9CLENBQUMsQ0FBQyxDQUNEOUUsRUFBRSxDQUFDNEUsT0FBTyxFQUFFO1FBQUUxRSxDQUFDLEVBQUU0RSxVQUFVLEdBQUcsQ0FBQyxHQUFHLE9BQU8sR0FBRyxNQUFNO1FBQUUxRSxRQUFRLEVBQUU7TUFBSSxDQUFDLENBQUMsQ0FDcEVKLEVBQUUsQ0FBQzZFLFdBQVcsRUFBRTtRQUFFMUUsT0FBTyxFQUFFLENBQUM7UUFBRUQsQ0FBQyxFQUFFLElBQUk7UUFBRUUsUUFBUSxFQUFFO01BQUksQ0FBQyxFQUFFLE9BQU8sQ0FBQztJQUNyRTtFQUNGO0VBRUEyRSxpQkFBaUJBLENBQUNMLENBQUMsRUFBRTVDLE9BQU8sRUFBRTtJQUM1QixNQUFNa0QsTUFBTSxHQUFHbEQsT0FBTyxDQUFDbUQscUJBQXFCLENBQUMsQ0FBQztJQUU5QyxNQUFNQyxPQUFPLEdBQUdSLENBQUMsQ0FBQ1MsT0FBTyxHQUFHSCxNQUFNLENBQUNJLEdBQUcsR0FBR0osTUFBTSxDQUFDSyxNQUFNLEdBQUcsQ0FBQztJQUMxRCxPQUFPSCxPQUFPLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQztFQUN6QjtBQUNGOzs7Ozs7OztVQzFVQSIsInNvdXJjZXMiOlsid2VicGFjazovL2JvaWxlcnBsYXRlLy4vYXBwL2NsYXNzZXMvQW5pbWF0aW9uLmpzIiwid2VicGFjazovL2JvaWxlcnBsYXRlL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ3NhcCBmcm9tIFwiZ3NhcFwiO1xuaW1wb3J0IGVhY2ggZnJvbSBcImxvZGFzaC9lYWNoXCI7XG5pbXBvcnQgeyBTY3JvbGxUcmlnZ2VyIH0gZnJvbSBcImdzYXAvU2Nyb2xsVHJpZ2dlclwiO1xuaW1wb3J0IHsgRHJhd1NWR1BsdWdpbiB9IGZyb20gXCJnc2FwL0RyYXdTVkdQbHVnaW5cIjtcbmltcG9ydCB7IFNwbGl0VGV4dCB9IGZyb20gXCJnc2FwL1NwbGl0VGV4dFwiO1xuXG5pbXBvcnQgeyBjcmVhdGVHbGl0Y2hDaGFyIH0gZnJvbSBcIi4uL3V0aWxzL2NyZWF0ZUdsaXRjaENoYXJcIjtcblxuZ3NhcC5yZWdpc3RlclBsdWdpbihTY3JvbGxUcmlnZ2VyLCBEcmF3U1ZHUGx1Z2luLCBTcGxpdFRleHQpO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5pbWF0aW9uIHtcbiAgY29uc3RydWN0b3IoKSB7fVxuICAvKipcbiAgICogQW5pbWUgbGVzIGZsw6hjaGVzIFNWRyBhdSBzdXJ2b2wgZGVzIGxpZW5zXG4gICAqIENyw6llIHVuIGVmZmV0IGRlIHRyYW5zaXRpb24gb8O5IGxhIGZsw6hjaGUgcHJpbmNpcGFsZSBzb3J0IGVuIGRpYWdvbmFsZVxuICAgKiBldCB1bmUgZmzDqGNoZSBzZWNvbmRhaXJlIGVudHJlIHBvdXIgbGEgcmVtcGxhY2VyXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZUxpc3R8QXJyYXl9IGxpbmtDb250YWluZXJzIC0gTGVzIGNvbnRlbmV1cnMgZGUgbGllbnMgYXZlYyBmbMOoY2hlcyDDoCBhbmltZXJcbiAgICovXG4gIGFuaW1hdGVBcnJvd09uSG92ZXIobGlua0NvbnRhaW5lcnMpIHtcbiAgICBlYWNoKGxpbmtDb250YWluZXJzLCAoY29udGFpbmVyKSA9PiB7XG4gICAgICAvLyBTw6lsZWN0aW9uIGRlcyBkZXV4IMOpdGF0cyBkZSBsYSBmbMOoY2hlXG4gICAgICBjb25zdCBhcnJvd0RlZmF1bHQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5hcnJvd1wiKTtcbiAgICAgIGNvbnN0IGFycm93SG92ZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5hcnJvd19faG92ZXJcIik7XG5cbiAgICAgIC8vIFRpbWVsaW5lIHBvdXIgZ8OpcmVyIGwnYW5pbWF0aW9uIGF1IHN1cnZvbFxuICAgICAgY29uc3QgaG92ZXJUaW1lbGluZSA9IGdzYXAudGltZWxpbmUoeyBwYXVzZWQ6IHRydWUgfSk7XG5cbiAgICAgIC8vIEFuaW1hdGlvbiBkZSBzb3J0aWUgOiBsYSBmbMOoY2hlIHBhciBkw6lmYXV0IHNlIGTDqXBsYWNlIGV0IGRpc3BhcmHDrnRcbiAgICAgIGhvdmVyVGltZWxpbmUudG8oYXJyb3dEZWZhdWx0LCB7XG4gICAgICAgIHg6IDEwLFxuICAgICAgICB5OiAtMTAsXG4gICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgIGR1cmF0aW9uOiAwLjIsXG4gICAgICB9KTtcblxuICAgICAgLy8gQW5pbWF0aW9uIGQnZW50csOpZSA6IGxhIGZsw6hjaGUgZGUgc3Vydm9sIGFwcGFyYcOudCDDoCBzYSBwbGFjZVxuICAgICAgaG92ZXJUaW1lbGluZS50byhhcnJvd0hvdmVyLCB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDAsXG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIGR1cmF0aW9uOiAwLjIsXG4gICAgICB9KTtcblxuICAgICAgLy8gRMOpY2xlbmNoZSBsJ2FuaW1hdGlvbiBhdSBzdXJ2b2xcbiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCAoKSA9PiB7XG4gICAgICAgIGhvdmVyVGltZWxpbmUucGxheSgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEludmVyc2UgbCdhbmltYXRpb24gcXVhbmQgbGEgc291cmlzIHF1aXR0ZSBsJ8OpbMOpbWVudFxuICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsICgpID0+IHtcbiAgICAgICAgaG92ZXJUaW1lbGluZS5yZXZlcnNlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGYWl0IGFwcGFyYWl0cmUgZW4gZm9uZHUgZXQgZGVwdWlzIGxlIGJhcyBvdSBsZSBoYXV0IHVuIG1vdFxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRleHRET01FbGVtZW50IC0gTCfDqWzDqW1lbnQgRE9NIMOgIGZhaXJlIGFwcGFyYWl0cmUgZGVwdWlzIGxlIGJhcyBvdSBsZSBoYXV0LlxuICAgKiBAcmV0dXJucyB7R1NBUFR3ZWVufSAtIFVuIG1vdCBxdWkgYXBwYXJhaXQgZGVwdWlzIGxlIGJhc1xuICAgKi9cbiAgYW5pbWF0ZVRleHRCeVdvcmRzKHRleHRET01FbGVtZW50KSB7XG4gICAgaWYgKCF0ZXh0RE9NRWxlbWVudCkgcmV0dXJuO1xuXG4gICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuICAgICAgdHJpZ2dlcjogdGV4dERPTUVsZW1lbnQsXG4gICAgICBzdGFydDogXCJ0b3AgYm90dG9tXCIsXG4gICAgICBvbkVudGVyOiAoKSA9PiB7XG4gICAgICAgIFNwbGl0VGV4dC5jcmVhdGUodGV4dERPTUVsZW1lbnQsIHtcbiAgICAgICAgICB0eXBlOiBcIndvcmRzXCIsXG4gICAgICAgICAgYXV0b1NwbGl0OiB0cnVlLFxuICAgICAgICAgIG9uU3BsaXQ6IChzZWxmKSA9PiB7XG4gICAgICAgICAgICBnc2FwLmZyb20oc2VsZi53b3Jkcywge1xuICAgICAgICAgICAgICB5UGVyY2VudDogMTAwLFxuICAgICAgICAgICAgICBhdXRvQWxwaGE6IDAsXG4gICAgICAgICAgICAgIGVhc2U6IFswLjc3LCAwLCAwLjE3NSwgMV0sXG4gICAgICAgICAgICAgIHN0YWdnZXI6IDAuMDUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmFpdCBhcHBhcmFpdHJlIGVuIGZvbmR1IGV0IGRlcHVpcyBsZSBiYXMgb3UgbGUgaGF1dCB1bmUgbGlnbmVcbiAgICogQHBhcmFtIHtFbGVtZW50fSB0ZXh0RE9NRWxlbWVudCAtIEwnw6lsw6ltZW50IERPTSDDoCBmYWlyZSBhcHBhcmFpdHJlIGRlcHVpcyBsZSBiYXMgb3UgbGUgaGF1dC5cbiAgICogQHJldHVybnMge0dTQVBUd2Vlbn0gLSBVbmUgbGlnbmUgcXVpIGFwcGFyYWl0IGRlcHVpcyBsZSBiYXNcbiAgICovXG4gIGFuaW1hdGVUZXh0QnlDaGFyYWN0ZXJzKHRleHRET01FbGVtZW50KSB7XG4gICAgaWYgKCF0ZXh0RE9NRWxlbWVudCkgcmV0dXJuO1xuICAgIFNwbGl0VGV4dC5jcmVhdGUodGV4dERPTUVsZW1lbnQsIHtcbiAgICAgIHR5cGU6IFwiY2hhcnNcIixcbiAgICAgIGF1dG9TcGxpdDogdHJ1ZSxcbiAgICAgIG9uU3BsaXQ6IChzZWxmKSA9PiB7XG4gICAgICAgIGdzYXAudG8oc2VsZi5jaGFycywge1xuICAgICAgICAgIHlQZXJjZW50OiAxMDAsXG4gICAgICAgICAgYXV0b0FscGhhOiAwLFxuICAgICAgICAgIGVhc2U6IFswLjc3LCAwLCAwLjE3NSwgMV0sXG4gICAgICAgICAgc3RhZ2dlcjogMC4wMDUsXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGYWl0IGFwcGFyYWl0cmUgZW4gZm9uZHUgZXQgZGVwdWlzIGxlIGJhcyBvdSBsZSBoYXV0IHVuZSBsaWduZVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRleHRET01FbGVtZW50IC0gTCfDqWzDqW1lbnQgRE9NIMOgIGZhaXJlIGFwcGFyYWl0cmUgZGVwdWlzIGxlIGJhcyBvdSBsZSBoYXV0LlxuICAgKiBAcmV0dXJucyB7R1NBUFR3ZWVufSAtIFVuZSBsaWduZSBxdWkgYXBwYXJhaXQgZGVwdWlzIGxlIGJhc1xuICAgKi9cbiAgYW5pbWF0ZVRleHRCeUxpbmVzKHRleHRET01FbGVtZW50KSB7XG4gICAgaWYgKCF0ZXh0RE9NRWxlbWVudCkgcmV0dXJuO1xuXG4gICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuICAgICAgdHJpZ2dlcjogdGV4dERPTUVsZW1lbnQsXG4gICAgICBzdGFydDogXCJ0b3AgYm90dG9tXCIsXG4gICAgICBvbmNlOiB0cnVlLFxuXG4gICAgICBvbkVudGVyOiAoKSA9PiB7XG4gICAgICAgIFNwbGl0VGV4dC5jcmVhdGUodGV4dERPTUVsZW1lbnQsIHtcbiAgICAgICAgICB0eXBlOiBcImxpbmVzXCIsXG4gICAgICAgICAgYXV0b1NwbGl0OiB0cnVlLFxuICAgICAgICAgIG9uU3BsaXQ6IChzZWxmKSA9PiB7XG4gICAgICAgICAgICBnc2FwLmZyb20oc2VsZi5saW5lcywge1xuICAgICAgICAgICAgICB5UGVyY2VudDogMTAwLFxuICAgICAgICAgICAgICBhdXRvQWxwaGE6IDAsXG4gICAgICAgICAgICAgIGVhc2U6IFswLjc3LCAwLCAwLjE3NSwgMV0sXG4gICAgICAgICAgICAgIHN0YWdnZXI6IDAuMDUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC0gTCfDqWzDqW1lbnQgRE9NIMOgIGZhaXJlIGFwcGFyYWl0cmUgZW4gbW9kZSBnbGl0Y2hcbiAgICogQHJldHVybnMge0dTQVBUd2Vlbn0gLSBVbiBtb3QgcXVpIGFwcGFyYWl0IGRlcHVpcyBsZSBiYXNcbiAgICovXG4gIGFuaW1hdGVHbGl0Y2hUZXh0KGVsZW1lbnQpIHtcbiAgICBnc2FwLnNldChlbGVtZW50LCB7IG9wYWNpdHk6IDEgfSk7XG5cbiAgICBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XG4gICAgICB0cmlnZ2VyOiBlbGVtZW50LFxuICAgICAgc3RhcnQ6IFwidG9wIGJvdHRvbVwiLFxuICAgICAgb25jZTogdHJ1ZSxcbiAgICAgIG9uRW50ZXI6ICgpID0+IHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGVsZW1lbnQuZGF0YXNldC50ZXh0O1xuICAgICAgICBjb25zdCBjaGFycyA9IHRleHQuc3BsaXQoXCJcIik7XG4gICAgICAgIGNvbnN0IGZha2VDaGFycyA9XG4gICAgICAgICAgXCIuLSc6XyxePTs+PCshcmMqL3o/c0xUdilKNyh8Rml7Q31mSTMxdGx1W25lb1o1WXhqeWFdMkVTd3FrUDZoOWQ0VnBPR2JVQUtYSG04UkQjJEJnME1OV1ElJkBcIi5zcGxpdChcbiAgICAgICAgICAgIFwiXCJcbiAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOyAvLyBGcmFnbWVudCBwb3VyIMOpdml0ZXIgbGVzIHJlZmxvd3NcblxuICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IFwiXCI7IC8vIFZpZGVyIGxlIGNvbnRlbnUgZGUgbCfDqWzDqW1lbnRcblxuICAgICAgICBlYWNoKGNoYXJzLCAoY2hhciwgaSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgY2hhcldyYXBwZXIsIGZha2VDaGFyLCByZWFsIH0gPSBjcmVhdGVHbGl0Y2hDaGFyKFxuICAgICAgICAgICAgY2hhcixcbiAgICAgICAgICAgIGZha2VDaGFyc1xuICAgICAgICAgICk7XG5cbiAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChjaGFyV3JhcHBlcik7XG5cbiAgICAgICAgICAvLyBBbmltYXRpb24gdGltZWxpbmVcbiAgICAgICAgICBnc2FwXG4gICAgICAgICAgICAudGltZWxpbmUoeyBkZWxheTogaSAqIDAuMDMgfSlcbiAgICAgICAgICAgIC5zZXQoY2hhcldyYXBwZXIsIHsgdmlzaWJpbGl0eTogXCJ2aXNpYmxlXCIgfSlcbiAgICAgICAgICAgIC50byhmYWtlQ2hhciwge1xuICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICBzdGFnZ2VyOiAwLjEsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiAwLjEsXG4gICAgICAgICAgICAgIGVhc2U6IFswLjc3LCAwLCAwLjE3NSwgMV0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRvKGZha2VDaGFyLCB7XG4gICAgICAgICAgICAgIHNjYWxlWDogMCxcbiAgICAgICAgICAgICAgc3RhZ2dlcjogMC4xLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogMC4xLFxuICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46IFwiY2VudGVyIGxlZnRcIixcbiAgICAgICAgICAgICAgZWFzZTogWzAuNzcsIDAsIDAuMTc1LCAxXSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudG8ocmVhbCwge1xuICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICBzdGFnZ2VyOiAwLjEsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiAwLjEsXG4gICAgICAgICAgICAgIGVhc2U6IFswLjc3LCAwLCAwLjE3NSwgMV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVW5lIGZvaXMgdG91cyBsZXMgw6lsw6ltZW50cyBjcsOpw6lzLCBsZXMgYWpvdXRlciB0b3VzIGQndW4gY291cCDDoCBsJ8OpbMOpbWVudCBET01cbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0QWxsQ2FyZHMoY2FyZHNFbGVtZW50cykge1xuICAgIGNvbnN0IGVsZW1lbnRzID0ge307XG4gICAgY29uc3QgY2FyZHMgPSBjYXJkc0VsZW1lbnRzO1xuXG4gICAgZWFjaChjYXJkcywgKGNhcmQsIGluZGV4KSA9PiB7XG4gICAgICBlbGVtZW50c1tgY2FyZF9fJHtpbmRleH1gXSA9IHt9OyAvLyBDcsOpZSB1biBvYmpldCBwb3VyIGNoYXF1ZSBjYXJ0ZVxuXG4gICAgICBjb25zdCBhbGxQYXJ0cyA9IFtcbiAgICAgICAgXCJjYXJkX19hcnJvd19fYmFyXCIsXG4gICAgICAgIFwiY2FyZF9fYXJyb3dfX2hlYWRfX2xlZnRcIixcbiAgICAgICAgXCJjYXJkX19hcnJvd19faGVhZF9fcmlnaHRcIixcbiAgICAgIF07XG5cbiAgICAgIGFsbFBhcnRzLmZvckVhY2goKHBhcnQpID0+IHtcbiAgICAgICAgY29uc3QgZWwgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoYC4ke3BhcnR9YCk7XG4gICAgICAgIGlmIChlbCkge1xuICAgICAgICAgIGVsZW1lbnRzW2BjYXJkX18ke2luZGV4fWBdW2Ake3BhcnR9YF0gPSBlbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDM7IGkrKykge1xuICAgICAgICAgIGNvbnN0IHByZUVsID0gY2FyZC5xdWVyeVNlbGVjdG9yKGAuJHtwYXJ0fV9fJHtpfWApO1xuICAgICAgICAgIGlmIChwcmVFbCkge1xuICAgICAgICAgICAgZWxlbWVudHNbYGNhcmRfXyR7aW5kZXh9YF1bYCR7cGFydH1fXyR7aX1gXSA9IHByZUVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZWxlbWVudHM7XG4gIH1cblxuICAvLyBGb25jdGlvbiBwb3VyIGNvbmZpZ3VyZXIgbGVzIGFuaW1hdGlvbnMgZGUgY2hhcXVlIGNhcnRlXG4gIHNldHVwQ2FyZEFuaW1hdGlvbnMoY2FyZHNFbGVtZW50cykge1xuICAgIGNvbnN0IGFsbFNWRyA9IHRoaXMuZ2V0QWxsQ2FyZHMoY2FyZHNFbGVtZW50cyk7IC8vIFLDqWN1cMOpcmVyIHRvdXMgbGVzIFNWR1xuICAgIGNvbnN0IGVhc2UgPSBbMC43NywgMCwgMC4xNzUsIDFdO1xuICAgIGNvbnN0IGlzTW9iaWxlID0gd2luZG93LmlubmVyV2lkdGggPD0gNjIxOyAvLyBEw6l0ZWN0aW9uIG1vYmlsZSAoYWp1c3RleiBsYSB2YWxldXIgc2Vsb24gdm9zIGJlc29pbnMpXG5cbiAgICAvLyBBcHBsaXF1ZXIgbGVzIGFuaW1hdGlvbnMgw6AgY2hhcXVlIGNhcnRlIGF1IHN1cnZvbFxuICAgIGNvbnN0IGFsbENhcmRzID0gY2FyZHNFbGVtZW50cztcblxuICAgIGVhY2goYWxsQ2FyZHMsIChjYXJkLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3Qgc3ZnRWxlbWVudHMgPSBhbGxTVkdbYGNhcmRfXyR7aW5kZXh9YF07IC8vIFLDqWN1cMOocmUgbGVzIMOpbMOpbWVudHMgU1ZHIGRlIGxhIGNhcnRlIGFjdHVlbGxlXG5cbiAgICAgIC8vIENyw6llIHVuZSB0aW1lbGluZSBHU0FQXG4gICAgICBjb25zdCB0bCA9IGdzYXAudGltZWxpbmUoeyBwYXVzZWQ6IHRydWUgfSk7XG4gICAgICBjb25zdCBkZWxheUluY3JlbWVudCA9IDAuMTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gMzsgaSsrKSB7XG4gICAgICAgIC8vIEFqb3V0IGRlcyBhbmltYXRpb25zIEdTQVAgcG91ciBjaGFxdWUgw6lsw6ltZW50IFNWR1xuICAgICAgICB0bC5mcm9tVG8oXG4gICAgICAgICAgc3ZnRWxlbWVudHNbYGNhcmRfX2Fycm93X19iYXJfXyR7aX1gXSxcbiAgICAgICAgICB7IGRyYXdTVkc6IFwiMCVcIiB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRyYXdTVkc6IFwiMTAwJVwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgIGVhc2UsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBgc3RhcnQrPSR7aSAqIGRlbGF5SW5jcmVtZW50fWAgLy8gQWpvdXRlciB1biBkw6ljYWxhZ2UgcmFwaWRlIGVudHJlIGxlcyBhbmltYXRpb25zXG4gICAgICAgIClcbiAgICAgICAgICAuZnJvbVRvKFxuICAgICAgICAgICAgc3ZnRWxlbWVudHNbYGNhcmRfX2Fycm93X19oZWFkX19sZWZ0X18ke2l9YF0sXG4gICAgICAgICAgICB7IGRyYXdTVkc6IFwiMCVcIiB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBkcmF3U1ZHOiBcIjEwMCVcIixcbiAgICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgICAgZWFzZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBgc3RhcnQrPSR7aSAqIGRlbGF5SW5jcmVtZW50ICsgMC4yfWAgLy8gTGUgbcOqbWUgZMOpY2FsYWdlXG4gICAgICAgICAgKVxuICAgICAgICAgIC5mcm9tVG8oXG4gICAgICAgICAgICBzdmdFbGVtZW50c1tgY2FyZF9fYXJyb3dfX2hlYWRfX3JpZ2h0X18ke2l9YF0sXG4gICAgICAgICAgICB7IGRyYXdTVkc6IFwiMCVcIiB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBkcmF3U1ZHOiBcIjEwMCVcIixcbiAgICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgICAgZWFzZSxcbiAgICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiBcInRvcCBib3R0b21cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBgc3RhcnQrPSR7aSAqIGRlbGF5SW5jcmVtZW50ICsgMC4yfWAgLy8gRMOpY2FsYWdlIHNpbWlsYWlyZSBpY2lcbiAgICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsaW5rQ2FyZCA9IGNhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19mb290ZXJcIik7XG5cbiAgICAgIC8vIFN1ciBtb2JpbGUgOiBhY3RpdmVyIGwnYW5pbWF0aW9uIHBhciBkw6lmYXV0XG4gICAgICBpZiAoaXNNb2JpbGUpIHtcbiAgICAgICAgdGwucGxheSgpOyAvLyBKb3VlIGwnYW5pbWF0aW9uIGltbcOpZGlhdGVtZW50IHN1ciBtb2JpbGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFN1ciBkZXNrdG9wIDogYXBwbGlxdWVyIGwnYW5pbWF0aW9uIGF1IHN1cnZvbCBzZXVsZW1lbnRcbiAgICAgICAgbGlua0NhcmQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgKCkgPT4ge1xuICAgICAgICAgIHRsLnBsYXkoKTsgLy8gSm91ZSBsJ2FuaW1hdGlvbiBsb3JzIGR1IHN1cnZvbFxuICAgICAgICB9KTtcblxuICAgICAgICBsaW5rQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCAoKSA9PiB7XG4gICAgICAgICAgdGwucmV2ZXJzZSgpOyAvLyBJbnZlcnNlIGwnYW5pbWF0aW9uIGxvcnNxdWUgbGEgc291cmlzIHF1aXR0ZSBsYSBjYXJ0ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZUhvdmVyQW5pbWF0aW9uKGUsIGVsZW1lbnQsIHN0YXRlID0gXCJob3ZlclwiKSB7XG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDYyMSkgcmV0dXJuO1xuXG4gICAgY29uc3Qgb3ZlcmxheSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5ob3ZlcmVkX19jb21wZXRlbmNlXCIpO1xuICAgIGNvbnN0IHN0YXRpY1RpdGxlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbXBldGVuY2VfX3N0YXRpY19fdGl0bGVcIik7XG4gICAgY29uc3QgZGlyZWN0aW9uWSA9IHRoaXMuZ2V0TW91dGhEaXJlY3Rpb24oZSwgZWxlbWVudCk7XG5cbiAgICBjb25zdCBob3ZlclRpbWVsaW5lID0gZ3NhcC50aW1lbGluZSgpO1xuXG4gICAgaWYgKHN0YXRlID09PSBcImhvdmVyXCIpIHtcbiAgICAgIGhvdmVyVGltZWxpbmVcbiAgICAgICAgLnNldChvdmVybGF5LCB7IHk6IGRpcmVjdGlvblkgPCAwID8gXCItMTAwJVwiIDogXCIxMDAlXCIgfSlcbiAgICAgICAgLnRvKHN0YXRpY1RpdGxlLCB7XG4gICAgICAgICAgeTogZGlyZWN0aW9uWSA8IDAgPyBcIjEwMCVcIiA6IFwiLTEwMCVcIixcbiAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgIGR1cmF0aW9uOiAwLjA1LFxuICAgICAgICB9KVxuICAgICAgICAudG8ob3ZlcmxheSwgeyB5OiBcIjAlXCIsIGR1cmF0aW9uOiAwLjEgfSk7XG4gICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gXCJzdGF0aWNcIikge1xuICAgICAgaG92ZXJUaW1lbGluZVxuICAgICAgICAuc2V0KHN0YXRpY1RpdGxlLCB7XG4gICAgICAgICAgeTogZGlyZWN0aW9uWSA8IDAgPyBcIjEwMCVcIiA6IFwiLTEwMCVcIixcbiAgICAgICAgfSlcbiAgICAgICAgLnRvKG92ZXJsYXksIHsgeTogZGlyZWN0aW9uWSA8IDAgPyBcIi0xMDAlXCIgOiBcIjEwMCVcIiwgZHVyYXRpb246IDAuNSB9KVxuICAgICAgICAudG8oc3RhdGljVGl0bGUsIHsgb3BhY2l0eTogMSwgeTogXCIwJVwiLCBkdXJhdGlvbjogMC4xIH0sIFwiPCswLjJcIik7XG4gICAgfVxuICB9XG5cbiAgZ2V0TW91dGhEaXJlY3Rpb24oZSwgZWxlbWVudCkge1xuICAgIGNvbnN0IGJvdW5kcyA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICBjb25zdCBmcm9tVG9wID0gZS5jbGllbnRZIC0gYm91bmRzLnRvcCA8IGJvdW5kcy5oZWlnaHQgLyAyO1xuICAgIHJldHVybiBmcm9tVG9wID8gLTEgOiAxO1xuICB9XG59XG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCJjMDM3MWZjOWEwYmE2YjgwNTNmZFwiKSJdLCJuYW1lcyI6WyJnc2FwIiwiZWFjaCIsIlNjcm9sbFRyaWdnZXIiLCJEcmF3U1ZHUGx1Z2luIiwiU3BsaXRUZXh0IiwiY3JlYXRlR2xpdGNoQ2hhciIsInJlZ2lzdGVyUGx1Z2luIiwiQW5pbWF0aW9uIiwiY29uc3RydWN0b3IiLCJhbmltYXRlQXJyb3dPbkhvdmVyIiwibGlua0NvbnRhaW5lcnMiLCJjb250YWluZXIiLCJhcnJvd0RlZmF1bHQiLCJxdWVyeVNlbGVjdG9yIiwiYXJyb3dIb3ZlciIsImhvdmVyVGltZWxpbmUiLCJ0aW1lbGluZSIsInBhdXNlZCIsInRvIiwieCIsInkiLCJvcGFjaXR5IiwiZHVyYXRpb24iLCJhZGRFdmVudExpc3RlbmVyIiwicGxheSIsInJldmVyc2UiLCJhbmltYXRlVGV4dEJ5V29yZHMiLCJ0ZXh0RE9NRWxlbWVudCIsImNyZWF0ZSIsInRyaWdnZXIiLCJzdGFydCIsIm9uRW50ZXIiLCJ0eXBlIiwiYXV0b1NwbGl0Iiwib25TcGxpdCIsInNlbGYiLCJmcm9tIiwid29yZHMiLCJ5UGVyY2VudCIsImF1dG9BbHBoYSIsImVhc2UiLCJzdGFnZ2VyIiwiYW5pbWF0ZVRleHRCeUNoYXJhY3RlcnMiLCJjaGFycyIsImFuaW1hdGVUZXh0QnlMaW5lcyIsIm9uY2UiLCJsaW5lcyIsImFuaW1hdGVHbGl0Y2hUZXh0IiwiZWxlbWVudCIsInNldCIsInRleHQiLCJkYXRhc2V0Iiwic3BsaXQiLCJmYWtlQ2hhcnMiLCJmcmFnbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImlubmVySFRNTCIsImNoYXIiLCJpIiwiY2hhcldyYXBwZXIiLCJmYWtlQ2hhciIsInJlYWwiLCJhcHBlbmRDaGlsZCIsImRlbGF5IiwidmlzaWJpbGl0eSIsInNjYWxlWCIsInRyYW5zZm9ybU9yaWdpbiIsImdldEFsbENhcmRzIiwiY2FyZHNFbGVtZW50cyIsImVsZW1lbnRzIiwiY2FyZHMiLCJjYXJkIiwiaW5kZXgiLCJhbGxQYXJ0cyIsImZvckVhY2giLCJwYXJ0IiwiZWwiLCJwcmVFbCIsInNldHVwQ2FyZEFuaW1hdGlvbnMiLCJhbGxTVkciLCJpc01vYmlsZSIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJhbGxDYXJkcyIsInN2Z0VsZW1lbnRzIiwidGwiLCJkZWxheUluY3JlbWVudCIsImZyb21UbyIsImRyYXdTVkciLCJsaW5rQ2FyZCIsImhhbmRsZUhvdmVyQW5pbWF0aW9uIiwiZSIsInN0YXRlIiwib3ZlcmxheSIsInN0YXRpY1RpdGxlIiwiZGlyZWN0aW9uWSIsImdldE1vdXRoRGlyZWN0aW9uIiwiYm91bmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZnJvbVRvcCIsImNsaWVudFkiLCJ0b3AiLCJoZWlnaHQiXSwic291cmNlUm9vdCI6IiJ9